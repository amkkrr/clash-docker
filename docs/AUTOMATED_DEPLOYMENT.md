# ğŸ¤– Clash Docker è‡ªåŠ¨åŒ–éƒ¨ç½²è§£å†³æ–¹æ¡ˆ

æœ¬é¡¹ç›®ç°åœ¨åŒ…å«å®Œæ•´çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œæ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥æœºåˆ¶ï¼Œå¯ä»¥é˜²æ­¢è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²æ—¶å‡ºç°æ–‡ä»¶ç¼ºå¤±é—®é¢˜ã€‚

## ğŸ¯ è§£å†³çš„é—®é¢˜

1. **é…ç½®è„šæœ¬ç¼ºå¤±** - è‡ªåŠ¨æ£€æµ‹å¹¶åˆ›å»ºç¼ºå¤±çš„é…ç½®ç”Ÿæˆè„šæœ¬
2. **ç¯å¢ƒæ–‡ä»¶ç¼ºå¤±** - è‡ªåŠ¨ä»æ¨¡æ¿åˆ›å»º .env æ–‡ä»¶
3. **ç›®å½•ç»“æ„ä¸å®Œæ•´** - è‡ªåŠ¨åˆ›å»ºå¿…éœ€çš„ç›®å½•
4. **æƒé™é—®é¢˜** - è‡ªåŠ¨è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
5. **æœåŠ¡å¯åŠ¨å¤±è´¥** - æ™ºèƒ½æ•…éšœæ£€æµ‹å’Œæ¢å¤

## ğŸš€ è‡ªåŠ¨åŒ–è„šæœ¬

### 1. éƒ¨ç½²å‰æ£€æŸ¥è„šæœ¬
```bash
# è¿è¡Œå®Œæ•´æ€§æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤
./scripts/pre-deploy-check.sh
```

**åŠŸèƒ½ï¼š**
- âœ… æ£€æŸ¥å¿…éœ€æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âœ… è‡ªåŠ¨åˆ›å»ºç¼ºå¤±çš„é…ç½®è„šæœ¬
- âœ… éªŒè¯ç›®å½•ç»“æ„å®Œæ•´æ€§
- âœ… æ£€æŸ¥æ–‡ä»¶æƒé™è®¾ç½®
- âœ… éªŒè¯Dockerç¯å¢ƒ
- âœ… æ£€æŸ¥ç«¯å£å†²çª

### 2. ä¸€é”®è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
```bash
# å®Œå…¨è‡ªåŠ¨åŒ–éƒ¨ç½²
./scripts/deploy.sh
```

**åŠŸèƒ½ï¼š**
- ğŸ”„ è‡ªåŠ¨ç¯å¢ƒæ£€æŸ¥å’Œä¿®å¤
- ğŸ§¹ æ¸…ç†æ—§çš„éƒ¨ç½²æ®‹ç•™
- ğŸ“¦ æ‹‰å–æœ€æ–°é•œåƒ
- âš™ï¸ æ™ºèƒ½é…ç½®ç”Ÿæˆ
- ğŸš€ å¯åŠ¨æ‰€æœ‰æœåŠ¡
- âœ… è‡ªåŠ¨æœåŠ¡éªŒè¯
- ğŸ“Š ç”Ÿæˆè®¿é—®ä¿¡æ¯

## ğŸ› ï¸ Dockeré…ç½®ä¼˜åŒ–

### æ™ºèƒ½é…ç½®ç”Ÿæˆ
`compose.yml` ç°åœ¨åŒ…å«è‡ªä¿®å¤é€»è¾‘ï¼š

```yaml
config-generator:
  command: >
    sh -c "
      # æ£€æŸ¥é…ç½®è„šæœ¬æ˜¯å¦å­˜åœ¨
      if [ ! -f './scripts/generate-config-universal.sh' ]; then
        # è‡ªåŠ¨ä»å¯ç”¨è„šæœ¬åˆ›å»º
        if [ -f './scripts/generate-config-advanced.sh' ]; then
          cp ./scripts/generate-config-advanced.sh ./scripts/generate-config-universal.sh
          chmod +x ./scripts/generate-config-universal.sh
        fi
      fi &&
      # æ‰§è¡Œé…ç½®ç”Ÿæˆ
      ./scripts/generate-config-universal.sh generate .env
    "
```

## ğŸ“‹ éƒ¨ç½²æµç¨‹

### è¿œç¨‹æœåŠ¡å™¨å¿«é€Ÿéƒ¨ç½²
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo> clash-docker
cd clash-docker

# 2. ä¸€é”®éƒ¨ç½²
chmod +x scripts/deploy.sh
sudo ./scripts/deploy.sh
```

### æ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¦‚éœ€è¦ï¼‰
```bash
# 1. æ£€æŸ¥ç¯å¢ƒ
./scripts/pre-deploy-check.sh

# 2. ä¿®å¤é—®é¢˜ï¼ˆå¦‚æœæœ‰ï¼‰
sudo cp scripts/generate-config-advanced.sh scripts/generate-config-universal.sh
sudo chmod +x scripts/generate-config-universal.sh

# 3. å¯åŠ¨æœåŠ¡
sudo docker-compose up -d
```

## ğŸ”§ æ•…éšœæ’é™¤

### è‡ªåŠ¨ç”Ÿæˆçš„æ•…éšœæ’é™¤æŒ‡å—
éƒ¨ç½²å®Œæˆåä¼šè‡ªåŠ¨ç”Ÿæˆ `troubleshooting.md` æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
- è°ƒè¯•å‘½ä»¤
- é‡æ–°éƒ¨ç½²æ­¥éª¤

### å¿«é€Ÿä¿®å¤å‘½ä»¤
```bash
# é‡æ–°ç”Ÿæˆé…ç½®
sudo docker-compose up config-generator

# å®Œå…¨é‡å¯
sudo docker-compose down -v
sudo docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
sudo docker-compose logs -f
```

## ğŸ¯ ä¼˜åŠ¿

1. **é›¶é…ç½®éƒ¨ç½²** - ä¸€ä¸ªå‘½ä»¤å®Œæˆæ‰€æœ‰éƒ¨ç½²æ­¥éª¤
2. **è‡ªåŠ¨ä¿®å¤** - æ™ºèƒ½æ£€æµ‹å’Œä¿®å¤å¸¸è§é—®é¢˜
3. **å®Œæ•´éªŒè¯** - éƒ¨ç½²åè‡ªåŠ¨éªŒè¯æ‰€æœ‰æœåŠ¡
4. **è¯¦ç»†æ—¥å¿—** - è®°å½•æ‰€æœ‰æ“ä½œä¾¿äºæ’æŸ¥
5. **æ•…éšœæ¢å¤** - æä¾›å®Œæ•´çš„æ•…éšœæ’é™¤æŒ‡å—

è¿™ä¸ªè‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆç¡®ä¿æ— è®ºåœ¨ä»€ä¹ˆç¯å¢ƒä¸‹éƒ¨ç½²ï¼Œéƒ½èƒ½è·å¾—ä¸€è‡´å’Œå¯é çš„ç»“æœã€‚

---

**æ›´æ–°æ—¥æœŸ**: 2025-07-13  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**ç»´æŠ¤è€…**: DevOpså›¢é˜Ÿ